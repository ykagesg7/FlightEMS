# FlightAcademyTsx 計画改善ロードマップ

## 📋 概要

このドキュメントは、FlightAcademyTsxプロジェクトの長期的な改善計画と実装進捗をまとめたものです。

**最新更新**: 2025年12月26日（ヘッダーUI改善・背景画像設定追加）
**バージョン**: Comprehensive Improvement Roadmap v2.0

---

## 🎯 プロジェクト全体ロードマップ

### **FlightAcademy 2024-2025 総合戦略**

FlightAcademyは、航空機操縦士の学習を支援する包括的なWebアプリケーションです。ユーザー体験の向上、機能の拡張、パフォーマンスの最適化を段階的に実装していく計画です。

#### **主要目標**
1. **型安全性の向上**: 100%型安全性の達成
2. **パフォーマンス最適化**: React 18 Concurrent Featuresの活用
3. **UX改善**: ユーザー体験の継続的向上
4. **機能拡張**: 学習システムの充実

---

## 🔎 現状の主要課題（リスク/ボトルネック）

- **Supabaseクライアントの一元管理**: 複数インスタンス警告の解消とセッション安定化
- **型安全性の残債**: 残存`any`の排除、strictモード下での型補強
- **Articlesカテゴリ運用の分散**: 表示ロジックとDBカテゴリの不整合防止
- **MDX→DB同期の運用負荷**: 大量反映時の手順整備
- **パフォーマンスの継続最適化**: 大量描画・強制リフロー箇所の監視と改善サイクル継続

---

## 📊 最近実装された機能（最新サマリー）

### **ヘッダーUI改善と背景画像設定（2025年12月26日完了）**

#### **MarketingLayoutヘッダー改善**
- **Yellow Robinロゴ追加**: ヘッダーにロゴ画像（`/images/yellow-robin-logo.png`）をアイコンとして表示
- **ブランド名表示改善**: 「Whisky Papa」をメインタイトル、「Competition Aerobatic Team」をサブタイトルとして2行表示
  - スタイリング: メインタイトルは太字白文字、サブタイトルは黄色系で小さいフォント、大文字・トラッキング拡張
- **HUDTimeDisplay常時表示**: ログイン状態に関係なく、デスクトップ表示で常時時計を表示
- **Favicon設定**: `/images/favicon.ico`を設定し、ブラウザタブにロゴを表示

#### **Home.tsx背景画像設定**
- **Hero Section**: パイロット視点の空中写真（`wp_cockpit_view.jpg`）を背景に設定
- **Concept Section**: コックピット計器盤（`wp_cockpit_instruments.jpg`）を左側テキスト部分のみの背景に設定
- **Wingman Program Section**: アクロバット飛行（`wp_aerobatic_flight2.jpg`）を背景に設定し、カードを透過（`bg-whiskyPapa-black-light/60 backdrop-blur-sm`）して背景画像が見えるように設定
- **The Pilot's Narrative Section**: アクロバット飛行（`wp_aerobatic_flight.jpg`）を背景に設定
- **各セクションの不透明度調整**: グラデーションオーバーレイと画像不透明度を調整し、テキストの可読性を確保しながら背景画像を適切に表示

### **飛行計画エクスポート/インポート・燃料計算・印刷機能（2025年12月24日完了）**

#### **JSON正本によるデータ永続化**
- PlanDocumentV1スキーマ: バージョン管理付きJSON形式で飛行計画を保存・共有可能
- エクスポート/インポート機能: JSONファイルとしてダウンロード・復元

#### **機体プリセットシステム（T-4モック実装）**
- 固定プリセット管理: `src/data/aircraftPresets.ts`に機体性能データを定義
- T-4練習機モック: 航空自衛隊T-4練習機の性能データ（モック値）
- 燃料計算ロジック: レグごとの燃料消費量と累積残燃料を自動計算

#### **空域→周波数の自動紐づけ**
- 空域GeoJSON参照: 既存の空域GeoJSONから周波数を取得
- 判定ロジック: レグの中点座標＋高度帯で該当ポリゴンを判定

#### **A4印刷機能（2ページ構成）**
- 印刷レイアウト: A4縦、1ページ目=NavLog、2ページ目=Route Sketch
- 印刷方式: ブラウザの`window.print()`を使用

### **リポジトリ整理作業（2025年12月24日完了）**
- 未参照ページの退避: 4ファイルを`archive/2025-12-24/`に退避
- 重複静的ファイルの退避: `src/content/05_TacanApproach.html`を退避
- ドキュメント整理: `docs/README.md`作成、クイックスタートガイド追加

### **MarketingLayout統合とコンテンツ改善（2025年12月14日完了）**
- ナビゲーション機能の拡張: ハンバーガーメニュー実装、モバイル対応
- 認証ページのリブランディング: Whisky Papaテーマに統一
- MISSIONページの機能統合: Blog、Experience、Shop、Galleryを統合

### **UI/UXリブランディングとデザインシステム基盤構築（2025年12月13日完了）**
- デザインシステムの刷新: Whisky Papaブランドカラー（黒×黄色）に統一
- ページリブランディング: Home、About、Articles、Learning、Planning、Test、Mission
- 品質向上・バグ修正: 型エラー修正、パフォーマンス最適化

### **Home/Dashboard統合とPhase 1機能実装（2025年1月16日完了）**
- Home/Dashboard統合: ルートパス（`/`）でログイン状態に応じて自動表示切り替え
- Phase 1機能: 今日の学習タスク、科目別レーダーチャート、学習履歴カレンダー

### **Phase 7: シリーズ順次アンロック機能（2025年11月2日完了）**
- シリーズ順次解放システム: シリーズ記事を1話から順に読了で解放
- 未ログインユーザー向け制限: 各シリーズの1話のみ閲覧可能
- ログインユーザー向け解放: 直前話の読了で次話が自動解放

### **Phase 5: 記事読書体験向上システム（2025年9月15日完了）**
- MDXメタデータシステム: 全26記事のメタデータ統一化
- 記事インデックスシステム: 型安全な記事管理・検索・ナビゲーション機能
- 目次システム: スクロール連動の目次、アンカーリンク
- 読書進捗表示: プログレスバー、残り読書時間の動的表示
- 関連記事システム: タグ・シリーズベースの関連記事推薦
- SEO最適化: JSON-LD構造化データ、OG・Twitterカード対応

### **Phase 6: Lessonページ検索・タグ機能統合（2025年8月17日完了）**
- ArticleSearch統合: Articlesページと同等の検索・タグUIを実装
- CPL学科コンテンツ対応: 航空法規・航空工学シリーズの統合表示
- 検索・フィルタリング最適化: 日本語検索の正規化、タグ動的抽出

---

## 📈 フェーズ別改善計画

### **Phase 1: 基盤構築（完了）**
- ✅ ユーザー認証システム
- ✅ 基本的なデータベース設計
- ✅ プロジェクト構造の確立

### **Phase 2: コア機能実装（完了）**
- ✅ 問題カテゴリ・デッキ管理
- ✅ 4択問題システム
- ✅ 基本的な学習記録

### **Phase 3: 学習支援機能（進行中）**
- ✅ SRS（間隔反復学習）システム
- ✅ タイマー機能
- ✅ 復習機能
- 🔄 AIパーソナライズ機能

### **Phase 4: 管理機能（計画中）**
- 🔄 Admin向け問題管理画面
- 🔄 CSVインポート機能
- 🔄 学習分析機能

### **Phase 5: 拡張機能（将来）**
- 🔄 デイリーチャレンジ
- 🔄 報酬・バッジシステム
- 🔄 マルチプレイヤーモード

### **Phase 6: パフォーマンス最適化（計画中）**
- 🔄 Supabaseクライアントの一元管理
- 🔄 React 18 Concurrent Featuresの活用
- 🔄 コード分割の最適化

### **Phase 7: データベース統合・ソーシャル機能（予定）**
- 🔄 記事統計システム（閲覧数、いいね、コメント）
- 🔄 コミュニティ機能（コメント、評価、共有）
- 🔄 AI学習アシスタント

---

## 📝 変更履歴

### **2025年12月26日**
- `docs/db`ディレクトリを削除（記事作成作業管理用ファイル）
- ドキュメント軽量化作業完了

### **2025年12月24日**
- 飛行計画エクスポート/インポート・燃料計算・印刷機能実装
- リポジトリ整理作業完了

### **2025年12月21日**
- HUDテーマ削除、Whisky Papaテーマ統一
- プロフィールページUI改善

**詳細な変更履歴はGitのコミット履歴を参照してください。**

---

**最終更新**: 2025年12月26日
**バージョン**: Comprehensive Improvement Roadmap v1.9
**管理者**: FlightAcademy開発チーム
