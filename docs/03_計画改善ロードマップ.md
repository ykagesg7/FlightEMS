# Flight Academy 開発ロードマップ

**最終更新**: 2026年2月8日
**バージョン**: Roadmap v3.4（ハイブリッド戦略対応）

---

## このドキュメントの目的

本書は Flight Academy の **実行計画** を定義する。
戦略の根拠は [00_Flight_Academy_Strategy.md](00_Flight_Academy_Strategy.md) を参照。

**推奨読み順**: [docs/README.md](README.md) → [00_Flight_Academy_Strategy.md](00_Flight_Academy_Strategy.md) → **このドキュメント**

---

## 現状評価（2026年2月7日時点）

### 完了済み機能

| Phase | 内容 | 状態 |
|:------|:-----|:-----|
| Phase 1: Brand Foundation | MarketingLayout/AppLayout、ブランドカラー | 完了 |
| Phase 2: Gamification | 統合ランクシステム、XP、ミッション、ストリーク | 完了 |
| Phase 3: Engagement | Gallery（イベント管理・いいね）、ランク連動 Shop | 完了 |
| Phase 4.5-4.7 | デュアルテーマ、リポジトリ整理、MarketingLayout統合 | 完了 |
| PPL ランクシステム | PPL中間ランク統合、ppl_rank_definitions テーブル | 完了 |
| CI/CD | GitHub Actions（test.yml、verify-build.yml） | 完了 |
| Flight Planning 拡張 | エクスポート/インポート、燃料計算、A4印刷 | 完了 |
| 記事システム | MDX、進捗管理、シリーズアンロック、KaTeX | 完了 |

### 未完了 / ブロック中の機能

| 項目 | 状態 | 新しい分類 |
|:-----|:-----|:-----------|
| PPL 記事 | 15/150（10%） | **最優先** — Phase A から継続 |
| CPL 記事（Phase 1: 19記事） | 0/19 | Phase D で着手 |
| Phase 4: 体験搭乗 | Coming Soon のみ | パートナーシップ待ち（Phase E） |
| Phase 5: 目標設定・弱点分析 | 未実装 | Phase D 以降 |
| Phase 6: ランキング機能 | 未実装 | Phase D |
| Phase 6: PWA 最適化 | 未実装 | Phase C |
| Shop ページ | 非表示（/shop → ホームリダイレクト） | パートナーシップ待ち（Phase E） |
| パイロット紹介 | コメントアウト | パートナーシップ待ち（Phase E） |

### 技術的負債

| 項目 | 現状 | 目標 |
|:-----|:-----|:-----|
| テストカバレッジ | 4.85%（10ファイル / 103テスト） | 50% — Phase D 末 |
| エラー監視 | Sentry 導入済み（DSN設定で有効化） | ✅ Phase A で完了 |
| アクセス解析 | なし | Analytics 導入 — Phase B |
| パフォーマンス監視 | なし | Lighthouse CI — Phase C |
| Supabase クライアント管理 | 複数インスタンス警告あり | 一元化 — Phase B |
| アクセシビリティ | 未対応 | WCAG 2.1 Level A — Phase C |

---

## Phase A: 基盤安定化（2026年3月 — 1ヶ月）

**目的**: コアビジネスロジックの品質保証と運用基盤の確立

### タスク

| # | タスク | 詳細 | 優先度 | 状態 |
|:--|:-------|:-----|:-------|:-----|
| A-1 | コアロジックのテスト追加 | `useGamification`, `usePPLRanks` のユニットテスト（`useArticleProgress`, `useLearningProgress` は Phase B へ移動） | 最高 | ✅ 完了 |
| A-2 | ユーティリティのテスト追加 | `airspace.ts`, `streak.ts` のユニットテスト（`planDocument.ts`, `offset.ts` は型定義のみで対象外） | 最高 | ✅ 完了 |
| A-3 | エラー監視の導入 | Sentry（`@sentry/react` + `@sentry/vite-plugin`）導入済み。DSN設定で有効化 | 高 | ✅ 完了 |
| A-4 | ドキュメント整理 | 本タスク（戦略ドキュメント書き換え）の完了 | 高 | ✅ 完了 |
| A-5 | 外部依存機能の整理 | Shop: `/shop`→`/`リダイレクト済、Experience: Coming Soon UI（`/experience`→`/mission`）、パイロット紹介: About.tsx内コメントアウト。コード変更不要、正式分類完了 | 中 | ✅ 完了 |
| A-6 | PPL 記事 2-3本 | Subject 1（航空工学）Phase 1 の残りを進める | 中 | |

### KPI（Phase A 完了基準）

- [ ] テストカバレッジ 15% 以上
- [ ] エラー監視サービスが稼働中
- [ ] 戦略ドキュメント4本の更新完了
- [ ] PPL 記事数: 17-18/150

---

## Phase B: コンテンツ加速（2026年4月-5月 — 2ヶ月）

**目的**: コンテンツ制作パイプラインの確立と品質の底上げ

### タスク

| # | タスク | 詳細 | 優先度 |
|:--|:-------|:-----|:-------|
| B-1 | PPL 記事制作パイプライン確立 | テンプレート最適化、AI アシスト活用で月5記事ペースを目指す | 最高 |
| B-2 | Subject 1 Phase 1 完了 | 航空工学の高頻出トピック記事を完成 | 最高 |
| B-3 | Subject 2 Phase 1 着手 | 航空気象の高頻出トピック記事に着手 | 高 |
| B-4 | フック・ユーティリティのテスト拡充 | `useShop`, `useGallery`, `useSeriesUnlock`, `supabase.ts` 等 | 高 |
| B-5 | アクセス解析の導入 | Google Analytics または Plausible | 中 |
| B-6 | Supabase クライアント一元化 | 複数インスタンス警告の解消 | 中 |

### KPI（Phase B 完了基準）

- [ ] PPL 記事数: 25/150（16.7%）以上
- [ ] Subject 1 Phase 1: 15/15 完了
- [ ] テストカバレッジ 30% 以上
- [ ] アクセス解析が稼働中
- [ ] 月5記事ペースが安定

---

## Phase C: ユーザー獲得準備（2026年6月-7月 — 2ヶ月）

**目的**: Flight Academy として正式公開し、ユーザー獲得の準備を整える

### タスク

| # | タスク | 詳細 | 優先度 |
|:--|:-------|:-----|:-------|
| C-1 | ブランド移行 | Flight Academy ロゴ、ブランドカラー、Home/About ページの刷新 | 高 |
| C-2 | SEO 最適化 | OGP 最適化、構造化データ検証、サイトマップ | 高 |
| C-3 | PWA 基盤 | Service Worker 導入、オフライン対応、インストール可能化 | 中 |
| C-4 | アクセシビリティ対応 | 主要ページの WCAG 2.1 Level A 対応 | 中 |
| C-5 | Lighthouse CI 導入 | パフォーマンス回帰防止の自動チェック | 中 |
| C-6 | Subject 2 Phase 1 完了目標 | 航空気象の高頻出トピック記事を完成 | 高 |
| C-7 | PPL 記事継続 | 月5記事ペース維持 | 高 |

### KPI（Phase C 完了基準）

- [ ] Flight Academy として公開（ブランド移行完了）
- [ ] Lighthouse Performance スコア 90 以上
- [ ] PPL 記事数: 35/150（23%）以上
- [ ] Subject 2 Phase 1 進捗: 8/12 以上
- [ ] PWA としてインストール可能

---

## Phase D: 成長（2026年8月-12月 — 5ヶ月）

**目的**: コンテンツの質的転換とユーザーベースの確立

### タスク

| # | タスク | 詳細 | 優先度 |
|:--|:-------|:-----|:-------|
| D-1 | PPL 記事 50% 完了 | Subject 1-5 の Phase 1 を可能な限り完了、Phase 2 に着手 | 最高 |
| D-2 | テストカバレッジ 50% 達成 | コンポーネントテスト、統合テストの追加 | 高 |
| D-3 | ランキング機能実装 | XP・正答率ベースのユーザーランキング | 中 |
| D-4 | CPL 記事 Phase 1 着手 | 高頻出問題 19 記事の作成開始 | 中 |
| D-5 | ユーザーフィードバック収集 | フィードバックフォーム、使用状況分析 | 中 |
| D-6 | LMS 目標設定機能 | GoalSetting.tsx の実装 | 低 |

### KPI（Phase D 完了基準）

- [ ] PPL 記事数: 75/150（50%）
- [ ] テストカバレッジ 50%
- [ ] ランキング機能が稼働
- [ ] CPL 記事: 5/19 以上
- [ ] 月間アクティブユーザー数を計測可能な状態

---

## Phase E: 拡張とパートナーシップ（2027年〜）

**目的**: プラットフォームの価値を活かした外部連携と機能拡張

### タスク（優先順位は状況に応じて判断）

| # | タスク | 詳細 |
|:--|:-------|:-----|
| E-1 | Whisky Papa パートナーシップ交渉 | 実績を持って再アプローチ |
| E-2 | フライトスクール連携 | 教材としての採用交渉 |
| E-3 | LMS 弱点分析機能 | クイズ結果から苦手カテゴリを特定し推奨記事をレコメンド |
| E-4 | PWA 最適化 | オフライン学習、プッシュ通知 |
| E-5 | PPL 記事 100% 完了 | 全 150 記事の完成 |
| E-6 | CPL 記事 Phase 1 完了 | 19 記事の完成 |

### パートナーシップ交渉の前提条件

以下を満たしてから交渉に臨む:
1. PPL 記事 50% 以上完了
2. 月間アクティブユーザーが存在
3. Flight Academy として安定稼働

---

## 成功指標サマリー

| Phase | 期間 | PPL 記事 | テストカバレッジ | その他 |
|:------|:-----|:---------|:----------------|:-------|
| **A** | 2026年3月 | 17-18/150 | 15% | エラー監視稼働 |
| **B** | 2026年4-5月 | 25/150 | 30% | Analytics 稼働、月5記事ペース |
| **C** | 2026年6-7月 | 35/150 | 30%+ | ブランド移行完了、PWA、Lighthouse 90+ |
| **D** | 2026年8-12月 | 75/150 | 50% | ランキング実装、CPL 着手 |
| **E** | 2027年〜 | 100%目標 | 50%+ | パートナーシップ交渉 |

---

## 旧ロードマップとの対応関係

本ロードマップは以下の旧計画を整理・統合したものである:

| 旧 Phase | 状態 | 新ロードマップでの扱い |
|:---------|:-----|:----------------------|
| Phase 1-3（Brand/Gamification/Engagement） | 完了 | 完了済みとして記録 |
| Phase 4（Real Experience） | 30% — ブロック中 | Phase E（パートナーシップ待ち） |
| Phase 4.5-4.7（Design System） | 完了 | 完了済みとして記録 |
| Phase 5（Advanced LMS） | 60% | Phase A-D に分散統合 |
| Phase 6（Content & Analytics） | 未着手 | Phase B-D に分散統合 |
| 06_記事作成ロードマップ Phase 1（CPL 19記事） | 未着手（計画は2025年1-3月だった） | Phase D で着手 |
| 07_PPL_Master_Syllabus | 10% 進行中 | Phase A-E で継続（最優先） |

---

## リスクと軽減策

| リスク | 影響 | 軽減策 |
|:-------|:-----|:-------|
| コンテンツ制作ペースが上がらない | PPL 50% 未達、プラットフォーム価値不足 | AI アシスト活用、品質基準の段階化（基本版 → 後で品質向上） |
| ソロ開発の限界 | 全方位で進捗が遅い | 優先順位を厳格に守る（コンテンツ > テスト > 安定化 > 新機能） |
| ユーザーが集まらない | フィードバックループが回らない | SEO、SNS 発信、フライトシムコミュニティへの露出 |
| 技術的負債の累積 | リグレッション、開発速度低下 | Phase A でテスト基盤を確立、Phase D で 50% 達成 |
| Supabase 無料枠の超過 | サービス停止リスク | ユーザー増加時にプラン変更を検討 |

---

## 更新履歴

| 日付 | 更新内容 |
|:-----|:---------|
| 2026-02-08 | v3.4: MDX 記事メタデータ形式の統一（7記事の YAML→ESM 変換）、画像記法統一、記事テンプレート更新、Cursor ルール追加（MDX ガイドライン・Git コミット規約） |
| 2026-02-08 | v3.3: A-5 外部依存機能の正式分類完了、.env ファイル整理（テンプレート修正・セクション再構成・cursorignore 調整） |
| 2026-02-07 | v3.2: Phase A-3 Sentry エラー監視導入完了 |
| 2026-02-07 | v3.1: Phase A テスト完了反映（A-1/A-2 完了、カバレッジ 3.9%→4.85%、103テスト/10ファイル） |
| 2026-02-07 | v3.0: ハイブリッド戦略対応で全面書き換え。Phase A-E の新ロードマップ策定 |
| 2025-12-26 | v1.9: ヘッダーUI改善・背景画像設定追加 |
| 2025-12-24 | v1.8: 飛行計画エクスポート/インポート・燃料計算・印刷機能実装 |

---

**最終更新**: 2026年2月8日
**バージョン**: Roadmap v3.4
**次回レビュー予定**: Phase A 完了時（2026年3月末）
